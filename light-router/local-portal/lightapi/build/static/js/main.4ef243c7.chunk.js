(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,r){},307:function(e){e.exports=[{depth:0,children:[],_styles:{root:{paddingLeft:-16,backgroundColor:null,height:"48px",cursor:"pointer",color:"rgba(0,0,0,0.87)",overflow:"hidden",transform:"translateZ(0)"}},_shouldRender:!1},{title:"OAuth 2",depth:1,parentIndex:0,children:[2,5],disabled:!1},{title:"Long-lived Token",depth:2,parentIndex:1,disabled:!1,link:"/form/longLivedTokenForm"},{title:"Services",depth:2,parentIndex:1,disabled:!1,link:"/oauth2-console/service"},{title:"Users",depth:2,parentIndex:1,disabled:!1,link:"/oauth2-console/user"},{title:"Clients",depth:2,parentIndex:1,disabled:!1,link:"/oauth2-console/client"},{title:"Token",depth:2,parentIndex:1,disabled:!1,link:"/oauth2-console/token"},{title:"Key",depth:2,parentIndex:1,disabled:!1,link:"/oauth2-console/key"},{title:"MarketPlace",depth:1,parentIndex:0,disabled:!1,children:[9,12]},{title:"REST",depth:2,parentIndex:8,disabled:!1,children:[10,11]},{title:"API List",depth:3,parentIndex:9,disabled:!1,link:"/rest/list"},{title:"Register",depth:3,parentIndex:9,disabled:!1,link:"/rest/register"},{title:"Hybrid",depth:2,parentIndex:8,disabled:!1,children:[13,14]},{title:"API List",parentIndex:12,depth:3,disabled:!0,link:"/hybrid/list"},{title:"Register",parentIndex:12,depth:3,disabled:!0,link:"/hybrid/register"},{title:"About",depth:1,parentIndex:0,disabled:!1,link:"/about"}]},322:function(e,t,r){e.exports=r(677)},331:function(e,t,r){},39:function(e){e.exports={longLivedTokenForm:{formId:"longLivedTokenForm",actions:[{host:"lightapi.net",service:"playground",action:"generateJwt",version:"0.1.0",title:"Generate Long-Lived Token",success:"/playground/longLivedToken"}],schema:{type:"object",required:["client_id","scope"],title:"JWT Claims",properties:{exp:{type:"integer"},client_id:{type:"string"},user_id:{type:"string"},scope:{type:"array",items:{type:"string"}}}},form:["*"]},service:{schema:{type:"object",required:["serviceId","serviceName","serviceType","scope"],properties:{serviceId:{title:"Service ID",type:"string"},serviceType:{title:"Service Type",type:"string",enum:["swagger","openapi","graphql","hybrid"]},serviceName:{title:"Serivce Name",type:"string"},serviceDesc:{title:"Service Description",type:"string"},ownerId:{title:"Owner ID",type:"string"},scope:{title:"Scope",type:"string"}}}},user:{schema:{type:"object",required:["userId","userType","firstName","lastName","email"],properties:{userId:{title:"User ID",type:"string"},userType:{title:"User Type",type:"string",enum:["admin","employee","customer","partner"]},firstName:{title:"First Name",type:"string"},lastName:{title:"Last Name",type:"string"},email:{title:"Email",type:"string",format:"email"},password:{title:"Password",type:"string",format:"password"},passwordConfirm:{title:"Password Confirm",type:"string",format:"password"}}}},password:{schema:{type:"object",required:["password","newPassword","newPasswordConfirm"],properties:{password:{title:"Password",type:"string",format:"password"},newPassword:{title:"New Password",type:"string",format:"password"},newPasswordConfirm:{title:"New Password Confirm",type:"string",format:"password"}}}},client:{schema:{type:"object",required:["clientType","clientProfile","clientName","clientDesc","ownerId","scope"],properties:{clientType:{title:"Client Type",type:"string",enum:["confidential","public","trusted","external"]},clientProfile:{title:"Client Profile",type:"string",enum:["webserver","browser","mobile","service","batch"]},clientName:{title:"Client Name",type:"string"},clientDesc:{title:"Client Description",type:"string"},customClaim:{title:"Custom Claim",type:"string"},redirectUri:{title:"Redirect URI",type:"string"},authenticateClass:{title:"Authenticate Class",type:"string"},derefClientId:{title:"Dereference Client ID",type:"string"},scope:{title:"Scope",type:"string"},ownerId:{title:"Owner ID",type:"string"}}}},token:{schema:{type:"object",required:["client_id","client_secret","grant_type"],properties:{client_id:{title:"Client ID",type:"string"},client_secret:{title:"Client Secret",type:"string"},grant_type:{title:"Grant Type",type:"string",enum:["authorization_code","client_credentials"]}}}},key:{schema:{type:"object",required:["client_id","client_secret","key_id"],properties:{client_id:{title:"Client ID",type:"string"},client_secret:{title:"Client Secret",type:"string"},key_id:{title:"Key ID",type:"string"}}}}}},674:function(e,t,r){},677:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),i=r(28),s=r.n(i),o=r(680),l=r(21),c=r(321),u=r(61),d=r(135),p="SUBMIT_FORM_STARTED",h="SUBMIT_FORM_SUCCESS",m="SUBMIT_FORM_FAILURE",f={},v=Object(u.c)({menu:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(arguments.length>1?arguments[1]:void 0).type,e},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(d.a)({},e,{fetching:!1,result:t.payload});case m:return Object(d.a)({},e,{fetching:!1,error:t.payload});case p:return Object(d.a)({},e,{fetching:!0});default:return e}}}),y=r(304),b=r(305),g=r.n(b),E=(r(331),r(16)),w=r(17),k=r(19),O=r(18),I=r(20),j=r(681),C=r(679),S=function(e){function t(){return Object(E.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,"Home")}}]),t}(n.Component),x=function(e){function t(){return Object(E.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return a.a.createElement("div",null,"About")}}]),t}(n.Component),D=r(77),N=r(682),T=r(306),_=r(93),V=r.n(_),P=r(123),F=r.n(P),M=r(91),R=r.n(M),L=r(124),A=r.n(L),U=r(29),q=r.n(U),B=r(46),W=r.n(B),z=r(94),J=r.n(z),H=r(313),K=r.n(H),G=r(312),Z=r.n(G),$=r(307),Q=r(95),X=r(2),Y=r.n(X),ee=r(678),te=r(78),re=r(308),ne=r.n(re),ae=r(309),ie=r.n(ae),se=r(310),oe=r.n(se),le=r(311),ce=r.n(le),ue=function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(k.a)(this,Object(O.a)(t).call(this,e))).state={activeListItem:e.activeListItem},r.handleTouchTap=r.handleTouchTap.bind(Object(Q.a)(Object(Q.a)(r))),r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"expandTree",value:function(e,t){if("undefined"!==typeof t&&null!==t&&t>=0){var r=e[t],n=[];for(r.children&&n.push(t);r;){var a=r.parentIndex;if("undefined"===typeof a)break;n.push(a),r=e[a]}return n.reverse()}return[]}},{key:"handleTouchTap",value:function(e,t){this.setState({activeListItem:t})}},{key:"componentDidUpdate",value:function(e){e.activeListItem!==this.props.activeListItem&&this.setState({activeListItem:this.props.activeListItem})}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.listItems,i=t.contentKey,s=this.props.style?this.props.style:{},o=this.props.startingDepth?this.props.startingDepth:1,l=this.state.activeListItem,c=this.expandTree(n,l),u=this.props.listHeight?this.props.listHeight:"48px",d=n.map(function(e,t,r){return e._styles={root:{paddingLeft:16*(e.depth-o),backgroundColor:l===t?"rgba(0,0,0,0.2)":null,height:u,cursor:e.disabled?"not-allowed":"pointer",color:e.disabled?"rgba(0,0,0,0.4)":"rgba(0,0,0,0.87)",overflow:"hidden",transform:"translateZ(0)"}},e}),p=(d=d.map(function(e,t){return e._shouldRender=e.depth>=o&&function e(t){if(t.depth>o){if(-1===c.indexOf(t.parentIndex))return!1;var r=n.filter(function(e,r){return r===t.parentIndex})[0];return e(r)}return!0}(e),e._primaryText=e[i],e})).map(function(t,r){if(t._shouldRender){var n={key:"treeListItem-"+r,style:t._styles.root};return t.link&&(n.component=ee.a,n.to=t.link),a.a.createElement(te.ListItem,Object.assign({},n,{onClick:function(){t.disabled||e.handleTouchTap(t,r)},button:!0}),a.a.createElement(te.ListItemIcon,null,function(e,t){return t?e.children?a.a.createElement(oe.a,null):a.a.createElement(ce.a,null):e.icon}(t,e.props.useFolderIcons)),a.a.createElement(te.ListItemText,{primary:t._primaryText}),t.children?-1===c.indexOf(r)?a.a.createElement(ne.a,null):a.a.createElement(ie.a,null):null)}return null}),h={root:{padding:0,paddingBottom:8,paddingTop:r?0:8}};return a.a.createElement("div",{style:Object.assign({},h.root,s)},r,a.a.createElement(te.List,null,p))}}]),t}(a.a.Component);ue.contextTypes={muiTheme:Y.a.object};var de=ue,pe=function(e){function t(){var e,r;Object(E.a)(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return(r=Object(k.a)(this,(e=Object(O.a)(t)).call.apply(e,[this].concat(a)))).state={mobileOpen:!1,listItems:$},r.handleDrawerToggle=function(){r.setState(function(e){return{mobileOpen:!e.mobileOpen}})},r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"findActiveItemIndex",value:function(e,t){if(t){var r=t.pathname,n=e.findIndex(function(e){return e.link===r});return n>=0?n:null}return null}},{key:"login",value:function(){window.location="https://signin.lightapi.net?client_id=f7d42348-c647-4efb-a52d-4c5787421e72&user_type=employee&redirect_uri=https://lightapi.net/authorization&state=1222"}},{key:"render",value:function(){var e=this.state.listItems,t=this.props,r=t.classes,n=t.children,i=t.theme,s=t.location,o=this.findActiveItemIndex(e,s),l=a.a.createElement(de,{listItems:e,contentKey:"title",useFolderIcons:!0,activeListItem:o}),c=a.a.createElement("div",null,a.a.createElement("div",{className:r.toolbar}),l);return a.a.createElement("div",{className:r.root},a.a.createElement(A.a,null),a.a.createElement(F.a,{position:"fixed",className:r.appBar},a.a.createElement(R.a,null,a.a.createElement(W.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerToggle,className:r.menuButton},a.a.createElement(Z.a,null)),a.a.createElement(q.a,{variant:"h6",color:"inherit",style:{flex:1}},"API Portal"),a.a.createElement("div",null,a.a.createElement(W.a,{color:"inherit",onClick:this.login},a.a.createElement(K.a,null))))),a.a.createElement("nav",{className:r.drawer},a.a.createElement(J.a,{smUp:!0,implementation:"css"},a.a.createElement(V.a,{container:this.props.container,variant:"temporary",anchor:"rtl"===i.direction?"right":"left",open:this.state.mobileOpen,onClose:this.handleDrawerToggle,classes:{paper:r.drawerPaper},ModalProps:{keepMounted:!0}},c)),a.a.createElement(J.a,{xsDown:!0,implementation:"css"},a.a.createElement(V.a,{classes:{paper:r.drawerPaper},variant:"permanent",open:!0},c))),a.a.createElement("main",{className:r.content},a.a.createElement("div",{className:r.toolbar}),n))}}]),t}(n.Component),he=Object(T.a)(N.a,Object(l.withStyles)(function(e){return{root:{display:"flex"},drawer:Object(D.a)({},e.breakpoints.up("sm"),{width:300,flexShrink:0}),appBar:Object(D.a)({marginLeft:300},e.breakpoints.up("sm"),{width:"calc(100% - ".concat(300,"px)")}),menuButton:Object(D.a)({marginRight:20},e.breakpoints.up("sm"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:300},content:{flexGrow:1,padding:3*e.spacing.unit}}},{withTheme:!0}))(pe),me=r(183),fe=r.n(me),ve=r(315);var ye=r(127),be=r(48),ge=r.n(be),Ee=r(35),we=r.n(Ee),ke=r(132),Oe=r.n(ke),Ie=r(23),je=r.n(Ie),Ce=r(39),Se=function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(k.a)(this,Object(O.a)(t).call(this,e))).onModelChange=function(e,t){je.a.selectOrSet(e,r.state.model,t)},r.state={fetching:!1,error:null,formId:null,schema:null,form:null,actions:null,model:{}},r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"componentWillUpdate",value:function(e,t,r){if(this.state.formId!==e.match.params.formId){var n=Ce[this.props.match.params.formId];this.setState({formId:e.match.params.formId,schema:n.schema,form:n.form,actions:n.actions,model:n.model||{}})}}},{key:"componentDidMount",value:function(){var e=Ce[this.props.match.params.formId];this.setState({formId:this.props.match.params.formId,schema:e.schema,form:e.form,actions:e.actions,model:e.model||{}})}},{key:"onButtonClick",value:function(e){console.log(e,this.state.model);var t=je.a.validateBySchema(this.state.schema,this.state.model);t.valid?(e.data=this.state.model,this.setState({success:e.success,fetching:!0}),this.props.submitForm(e)):this.setState({error:t.error.message})}},{key:"render",value:function(){var e=this,t=this.props.classes;if(this.state.schema){var r,n=[];this.state.actions.map(function(r,i){var s=e.onButtonClick.bind(e,r);n.push(a.a.createElement(we.a,{variant:"contained",className:t.button,color:"primary",key:i,onClick:s},r.title))}),r=this.state.fetching?a.a.createElement("div",null,a.a.createElement(ge.a,{className:t.progress})):a.a.createElement("div",null);var i=a.a.createElement("h2",null,this.state.schema.title);return a.a.createElement("div",null,r,i,a.a.createElement(Oe.a,{schema:this.state.schema,form:this.state.form,model:this.state.model,onModelChange:this.onModelChange}),a.a.createElement("pre",null,this.state.error),n)}return a.a.createElement(ge.a,{className:t.progress})}}]),t}(n.Component),xe=Object(ye.a)(function(e){return{}},function(e){return{submitForm:function(t){return e(function(e){return function(){var t=Object(ve.a)(fe.a.mark(function t(r){var n,a,i;return fe.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:p}),n={method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)},t.prev=2,t.next=5,fetch("/api/portal",n);case 5:return a=t.sent,t.next=8,a.json();case 8:i=t.sent,r({type:h,payload:i}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r({type:m,error:t.t0.toString()});case 15:case"end":return t.stop()}},t,this,[[2,12]])}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(Object(l.withStyles)(function(e){return{root:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing.unit,minWidth:120},selectEmpty:{marginTop:2*e.spacing.unit},progress:{margin:2*e.spacing.unit},button:{margin:e.spacing.unit}}})(Se)),De={service:{get:"/oauth2/service?page=1",post:"/oauth2/service",put:"/oauth2/service",delete:"/oauth2/service"},user:{get:"/oauth2/user?page=1",post:"/oauth2/user",put:"/oauth2/user",delete:"/oauth2/user"},password:{post:"/oauth2/password"},client:{get:"/oauth2/client?page=1",post:"/oauth2/client",put:"/oauth2/client",delete:"/oauth2/client"},code:{get:"/oauth2/code"},token:{post:"/oauth2/token"},key:{get:"/oauth2/key"}},Ne={service:{path:De.service,getId:function(e){return e.serviceId},getName:function(e){return e.serviceName},getDeleteUrl:function(e){return De.service.delete+"/"+e.serviceId},viewer:"dataViewer",editor:"dataEditor",component:"webConsole"},user:{path:De.user,getId:function(e){return e.userId},getName:function(e){return e.firstName+" "+e.lastName+" ("+e.email+")"},getDeleteUrl:function(e){return De.user.delete+"/"+e.userId},viewer:"userViewer",editor:"userEditor",hideFields:["password","passwordConfirm"],component:"webConsole"},client:{path:De.client,getId:function(e){return e.clientId},getName:function(e){return e.clientName},getDeleteUrl:function(e){return De.client.delete+"/"+e.clientId},viewer:"dataViewer",editor:"dataEditor",hideFields:["clientSecret"],component:"webConsole"},token:{path:De.token,viewer:"dataViewer",component:"tokenView"},key:{path:De.key,viewer:"dataViewer",component:"keyView"}},Te=r(49),_e=r.n(Te),Ve=r(318),Pe=r.n(Ve),Fe=r(317),Me=r.n(Fe),Re=r(31),Le=r.n(Re),Ae=r(316),Ue=r.n(Ae),qe=function(){function e(){Object(E.a)(this,e)}return Object(w.a)(e,null,[{key:"isEmpty",value:function(e){return!e||0===e.length}},{key:"capitalize",value:function(e){return e&&e[0].toUpperCase()+e.slice(1).toLowerCase()}},{key:"replace",value:function(e,t,r){return e&&e.replace(t,r)}},{key:"toItemId",value:function(e){return"i-"+e}},{key:"toViewerId",value:function(e){return"v-"+e}},{key:"clean",value:function(t){return Object.keys(t).forEach(function(r){t[r]&&"object"===typeof t[r]?e.clean(t[r]):null==t[r]&&delete t[r]}),t}},{key:"createAxiosClient",value:function(){return Ue.a.create({validateStatus:function(e){return 200===e},Origin:window.location.origin})}},{key:"toFormData",value:function(e){var t=new FormData;for(var r in e)t.append(r,e[r]);return t}},{key:"resize",value:function(e){e.style.height="auto",e.style.height=e.scrollHeight+"px"}}]),e}(),Be=r(47),We=(r(122),function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(k.a)(this,Object(O.a)(t).call(this,e))).textareaRef=a.a.createRef(),r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){qe.resize(this.textareaRef.current)}},{key:"componentDidUpdate",value:function(e,t){qe.resize(this.textareaRef.current)}},{key:"render",value:function(){var e,t,r=this,n=this.props.data;return"text"!==this.props.type&&(n=Be({},this.props.data),qe.isEmpty(this.props.hideFields)||this.props.hideFields.forEach(function(e){return delete n[e]}),n=JSON.stringify(n,null,4)),this.props.remove&&(e=a.a.createElement("button",{type:"button",title:"remove",className:"icon-button","aria-label":"Delete",onClick:function(e){return r.props.remove(e)}},a.a.createElement(Me.a,null))),this.props.edit&&(t=a.a.createElement("button",{type:"button",title:"edit",className:"icon-button","aria-label":"Edit",onClick:function(e){return r.props.edit(e)}},a.a.createElement(Pe.a,null))),a.a.createElement(Le.a,{id:qe.toViewerId(this.props.dataId)},a.a.createElement("button",{type:"button",title:"close",className:"icon-button","aria-label":"Close",onClick:function(){return r.props.close()}},a.a.createElement(_e.a,null)),e,t,this.props.additionalControls,a.a.createElement("textarea",{ref:this.textareaRef,className:"code-text",readOnly:!0,value:n}))}}]),t}(a.a.Component)),ze=function(e){var t=e.id,r=e.schema,n=e.form,i=e.initialValues,s=e.close,o=e.onModelChange,l=e.submitForm,c=e.mapper;return a.a.createElement("div",{id:t},a.a.createElement("button",{type:"button",title:"close",className:"icon-button","aria-label":"Close",onClick:function(){return s()}},a.a.createElement(_e.a,null)),a.a.createElement("form",{onSubmit:function(e){return l(e)}},a.a.createElement(Oe.a,{schema:r,form:n,model:i,onModelChange:function(e,t){return o(e,t)},mapper:c}),a.a.createElement(we.a,{className:"submit-btn",variant:"outlined",color:"primary",type:"submit"}," Submit ")))},Je=function(e){return function(t){function r(e){var t;return Object(E.a)(this,r),(t=Object(k.a)(this,Object(O.a)(r).call(this,e))).state={values:e.data||{}},t.submit=e.submit,t.close=e.close,t.handleError=e.handleError,t}return Object(I.a)(r,t),Object(w.a)(r,[{key:"onModelChange",value:function(e,t){var r=Be({},this.state);r.values[e]=t,this.setState(r)}},{key:"getFieldName",value:function(e){var t=!qe.isEmpty(e)&&e.startsWith("/")?e.substring(1):e,r=this.props.formData.schema.properties[t];return r&&r.title?r.title:t}},{key:"submitForm",value:function(e,t){var r=this;e.preventDefault();var n=this.props.data?Be({},this.props.data):{},a=qe.clean(Object.assign({},n,this.state.values)),i=je.a.validateBySchema(t,a);i.valid?this.submit(a,function(){return r.resetForm}):this.handleError({message:this.getFieldName(i.error.dataPath)+"=>"+i.error.message})}},{key:"resetForm",value:function(){this.setState({values:{}})}},{key:"closeForm",value:function(){this.resetForm(),this.close()}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({values:this.props.data?this.props.data:{}}),e.submit!==this.props.submit&&(this.submit=this.props.submit)}},{key:"render",value:function(){var t=this;return a.a.createElement(e,Object.assign({render:function(e,r){return a.a.createElement(ze,{id:"data-editor",schema:e,form:t.props.formData.form,initialValues:t.state.values,onModelChange:function(e,r){return t.onModelChange(e,r)},close:function(){return t.closeForm()},submitForm:function(r){return t.submitForm(r,e)},mapper:r})}},this.props))}}]),r}(a.a.Component)},He=Je(function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(k.a)(this,Object(O.a)(t).call(this,e))).state={userIds:[]},r.axiosClient=qe.createAxiosClient(),r.schema=Be({},e.formData.schema),r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.axiosClient.get(De.user.get).then(function(t){var r=t.data.slice().map(function(e){return e.userId});qe.isEmpty(r)||(e.schema.properties.ownerId.enum=r),e.setState({userIds:r})}).catch(function(t){e.handleError(t)})}},{key:"render",value:function(){return this.props.render(this.schema)}}]),t}(a.a.Component)),Ke=r(319),Ge=r.n(Ke),Ze=Je(function(e){var t=e.formData;return(0,e.render)(t.schema)}),$e=function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(k.a)(this,Object(O.a)(t).call(this,e))).state={showPasswordEditor:!1},r.postUrl=De.password.post+"/"+e.dataId,r.axiosClient=qe.createAxiosClient(),r.pwFormData=Ce.password,r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"openPasswordEditor",value:function(){this.setState(Object.assign({},this.state,{showPasswordEditor:!0}))}},{key:"closePasswordEditor",value:function(){this.setState(Object.assign({},this.state,{showPasswordEditor:!1}))}},{key:"resetPassword",value:function(e){var t=this;this.axiosClient.post(this.postUrl,qe.clean(e)).then(function(e){t.closePasswordEditor(),t.props.handleError()}).catch(function(e){t.props.handleError(e)})}},{key:"render",value:function(){var e=this;if(this.state.showPasswordEditor)return a.a.createElement(Ze,{formData:this.pwFormData,submit:function(t){return e.resetPassword(t)},close:function(){return e.closePasswordEditor()}});var t=a.a.createElement("button",{type:"button",className:"icon-button","aria-label":"reset password",title:"reset password",onClick:function(){return e.openPasswordEditor()}},a.a.createElement(Ge.a,null));return a.a.createElement(We,Object.assign({additionalControls:t},this.props))}}]),t}(a.a.Component),Qe=r(75),Xe=r.n(Qe),Ye=r(133),et=r.n(Ye),tt=function(e,t,r){if("string"===je.a.stripNullType(t.type)&&"password"===je.a.stripNullType(t.format)){var n=je.a.stdFormObj(e,t,r);return n.key=r.path,n.type="password",r.lookup[et.a.stringify(r.path)]=n,n}},rt=function(e,t,r){if("string"===je.a.stripNullType(t.type)&&"email"===je.a.stripNullType(t.format)){var n=je.a.stdFormObj(e,t,r);return n.key=r.path,n.type="email",r.lookup[et.a.stringify(r.path)]=n,n}},nt=Je(function(e){var t=e.formData,r=e.data,n=e.render,a=qe.isEmpty(r),i=t.schema;if(!a){var s=Object.assign({},t.schema.properties);delete s.password,delete s.passwordConfirm,i=Object.assign({},t.schema,{properties:s})}return je.a.prependRule("string",tt),je.a.prependRule("string",rt),n(i,{email:Xe.a})}),at=r(89),it=r.n(at),st=r(90),ot=r.n(st),lt=r(126),ct=r.n(lt),ut=r(125),dt=r.n(ut),pt=r(62),ht=r.n(pt),mt=(r(674),function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(k.a)(this,Object(O.a)(t).call(this,e))).axiosClient=qe.createAxiosClient(),r.view=e.view,r.viewer=e.viewer,r.editor=e.editor,r.module=e.module,r.formData=e.formData,console.log("loading view "+r.view),r.state={loading:!0,showSpinner:!1,activeId:"",mode:t.MODES.VIEW,data:[],error:null,postResponse:""},r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.refresh()}},{key:"refresh",value:function(e,r){var n=this;this.axiosClient.get(this.module.path.get).then(function(r){var a=r.data.slice();n.setState({activeId:"",mode:t.MODES.VIEW,data:a,loading:!1,error:""}),e&&e()}).catch(function(e){n.setState({activeId:"",mode:t.MODES.VIEW,loading:!1,showSpinner:!1,error:e}),r&&r()}),setTimeout(function(){return n.setState(Object.assign({},n.state,{showSpinner:!0}))},500)}},{key:"openEditor",value:function(e){var r=Object.assign({},this.state,{mode:e,postResponse:"",error:null});t.MODES.ADD===e&&(r.activeServiceId=""),this.setState(r)}},{key:"closeViewer",value:function(){var e=Object.assign({},this.state,{activeId:"",mode:t.MODES.VIEW,postResponse:"",error:null});this.setState(e)}},{key:"openViewer",value:function(e){var r=Object.assign({},this.state,{activeId:e,mode:t.MODES.VIEW,postResponse:"",error:null});this.setState(r)}},{key:"createLabelItem",value:function(e,t,r){var n=this,i=this.module.getId(e),s=this.module.getName(e),o=i===this.state.activeId,l=a.a.createElement(dt.a,null);return t===r-1&&(l=null),a.a.createElement("div",{key:t},a.a.createElement(ot.a,{button:!0,selected:o,onClick:function(){return n.openViewer(i)},id:qe.toItemId(i),key:t},a.a.createElement(ct.a,{primary:s})),l)}},{key:"renderDataEditor",value:function(){var e=this;if(t.MODES.VIEW===this.state.mode)return null;if(t.MODES.EDIT===this.state.mode){var r=this.state.data.find(function(t){return e.module.getId(t)===e.state.activeId});return r?a.a.createElement(this.editor,{formData:this.formData,submit:function(t){return e.updateObject(t)},data:r,close:function(){return e.closeViewer()},handleError:function(t){return e.handleError(t)}}):null}return a.a.createElement(this.editor,{formData:this.formData,submit:function(t){return e.addObject(t)},close:function(){return e.closeViewer()},handleError:function(t){return e.handleError(t)}})}},{key:"renderDataViewer",value:function(){var e=this;if(t.MODES.VIEW!==this.state.mode)return null;var r=this.state.data.find(function(t){return e.module.getId(t)===e.state.activeId});if(!r)return null;var n=this.module.getId(r),i=n===this.state.activeId;return a.a.createElement(this.viewer,{data:r,dataId:n,active:i,hideFields:this.module.hideFields,close:function(){return e.closeViewer()},remove:function(){return e.removeObject(r)},edit:function(){return e.openEditor(t.MODES.EDIT)},handleError:function(t){return e.handleError(t)}})}},{key:"handleError",value:function(e){this.setState(Object.assign({},this.state,{error:e}))}},{key:"addObject",value:function(e,t,r){var n=this;this.axiosClient.post(this.module.path.post,qe.clean(e)).then(function(e){n.setState(Object.assign({},n.state,{postResponse:e.data})),n.refresh(t)}).catch(function(e){n.handleError(e),r&&r()})}},{key:"updateObject",value:function(e,t,r){var n=this;this.axiosClient.put(this.module.path.put,qe.clean(e)).then(function(r){n.refresh(function(){t&&t(),n.openViewer(n.module.getId(e))})}).catch(function(e){n.handleError(e),r&&r()})}},{key:"removeObject",value:function(e,t,r){var n=this;if(e){var a=this.module.getDeleteUrl(e);a&&this.axiosClient.delete(a).then(function(e){n.refresh(t)}).catch(function(e){n.handleError(e),r&&r()})}}},{key:"renderError",value:function(){var e=this;if(!qe.isEmpty(this.state.error)&&!qe.isEmpty(this.state.error.message))return a.a.createElement("div",{className:"error-message"},a.a.createElement("button",{type:"button",title:"close",className:"icon-button","aria-label":"Close",onClick:function(){return e.handleError()}},a.a.createElement(_e.a,null)),this.state.error.message,a.a.createElement("pre",null,this.state.error.response&&this.state.error.response.data&&JSON.stringify(this.state.error.response.data,null,4)))}},{key:"renderPostResponse",value:function(){var e=this;if(!qe.isEmpty(this.state.postResponse))return a.a.createElement(this.viewer,{data:this.state.postResponse,dataId:"post-response",active:"true",close:function(){return e.closeViewer()},handleError:function(t){return e.handleError(t)}})}},{key:"renderSummary",value:function(){var e=this;if(!qe.isEmpty(this.state.data)||qe.isEmpty(this.state.error))return a.a.createElement(ht.a,{item:!0,xs:4},a.a.createElement(ht.a,{container:!0,item:!0,direction:"row-reverse"},a.a.createElement(we.a,{variant:"outlined",color:"primary",onClick:function(){return e.openEditor(t.MODES.ADD)}},"Add "+this.view)),a.a.createElement(it.a,{className:"summary-list "+this.props.classes.list},this.state.data.map(function(t,r,n){var a=n.length;return e.createLabelItem(t,r,a)})))}},{key:"render",value:function(){var e;return this.state.loading?this.state.showSpinner&&(e=a.a.createElement(ge.a,null)):e=a.a.createElement(ht.a,{container:!0,spacing:8,id:this.view+"-view"},this.renderSummary(),a.a.createElement(ht.a,{item:!0,xs:8},this.renderDataViewer(),this.renderDataEditor(),this.renderError(),this.renderPostResponse())),a.a.createElement("div",null,e)}}]),t}(a.a.Component));mt.MODES={VIEW:"view",EDIT:"edit",ADD:"add"};var ft=Object(l.withStyles)(function(e){return{list:{backgroundColor:e.palette.background.paper}}})(mt),vt=r(320),yt=r.n(vt),bt=Je(function(e){var t=e.formData;return(0,e.render)(t.schema)}),gt=function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(k.a)(this,Object(O.a)(t).call(this,e))).state={token:"",auth_code:"",error:""},r.axiosClient=qe.createAxiosClient(),r.formData=Ce[e.view],r.viewer=e.viewer,r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"sendRequest",value:function(e){var t=this;"authorization_code"===e.grant_type?this.requestAuthorization(e,function(e){return t.requestToken(e)}):this.requestToken(e)}},{key:"requestAuthorization",value:function(e,t){var r=this,n={headers:{Authorization:"Basic "+btoa("admin:123456")},validateStatus:function(e){return 200===e||302===e||404===e}},a=window.origin+De.code.get+"/authorization",i=De.code.get+"?response_type=code&client_id="+e.client_id+"&redirect_uri="+a;this.axiosClient.get(i,n).then(function(n){var i,s=n.request.responseURL;s&&s.startsWith(a)&&s.indexOf("=")>0&&(i=s.substring(s.indexOf("=")+1)),qe.isEmpty(i)?r.handleError({message:"failed to acquire authorization code."}):t&&t(Object.assign({},e,{code:i,redirect_uri:a}))}).catch(function(e){return r.handleError(e)})}},{key:"requestToken",value:function(e){var t=this,r="Basic "+e.client_id+":"+e.client_secret,n={headers:{Authorization:r,"Content-Type":"application/x-www-form-urlencoded"}};console.log("authStr="+r);var a=yt.a.stringify(qe.clean(e));console.log("req="+a),this.axiosClient.post(De.token.post,a,n).then(function(r){var n=r.data;t.setState({token:n,auth_code:e.code,error:null})}).catch(function(e){t.handleError(e)})}},{key:"closeViewer",value:function(){this.setState({token:""})}},{key:"handleError",value:function(e){this.setState({error:e,token:"",auth_code:""})}},{key:"renderViewer",value:function(){var e=this;if(qe.isEmpty(this.state.token))return null;var t;return t=qe.isEmpty(this.state.auth_code)?this.state.token:{authorizationCode:this.state.auth_code,token:this.state.token},a.a.createElement("div",{className:"standalone"},a.a.createElement(this.viewer,{data:t,dataId:"token-viewer",active:!0,close:function(){return e.closeViewer()},handleError:function(t){return e.handleError(t)}}))}},{key:"renderError",value:function(){var e=this;if(!qe.isEmpty(this.state.error)&&!qe.isEmpty(this.state.error.message))return a.a.createElement("div",{className:"error-message"},a.a.createElement("button",{type:"button",title:"close",className:"icon-button","aria-label":"Close",onClick:function(){return e.handleError()}},a.a.createElement(_e.a,null)),this.state.error.message,a.a.createElement("pre",null,this.state.error.response&&this.state.error.response.data&&JSON.stringify(this.state.error.response.data,null,4)))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{className:"row",id:"token-view"},a.a.createElement(bt,{formData:this.formData,submit:function(t){return e.sendRequest(t)}}),this.renderViewer(),this.renderError())}}]),t}(a.a.Component),Et=Je(function(e){var t=e.formData;return(0,e.render)(t.schema)}),wt=function(e){function t(e){var r;return Object(E.a)(this,t),(r=Object(k.a)(this,Object(O.a)(t).call(this,e))).state={loading:!0,showSpinner:!1,cert:"",error:""},r.axiosClient=qe.createAxiosClient(),r.formData=Ce[e.view],r.viewer=e.viewer,r}return Object(I.a)(t,e),Object(w.a)(t,[{key:"resetStatus",value:function(){this.setState({loading:!0,showSpinner:!1,cert:"",error:""})}},{key:"requestCert",value:function(e){var t=this;this.resetStatus();var r={headers:{Authorization:"Basic "+btoa(e.client_id+":"+e.client_secret)}},n=De.key.get+"/"+e.key_id;this.axiosClient.get(n,r).then(function(e){var r=e.data;t.setState({cert:r,loading:!1})}).catch(function(e){t.setState(Object.assign({},t.state,{loading:!1,showSpinner:!1})),t.handleError(e)}),setTimeout(function(){return t.setState(Object.assign({},t.state,{showSpinner:!0}))},500)}},{key:"closeViewer",value:function(){this.setState({cert:""})}},{key:"handleError",value:function(e){this.setState({error:e})}},{key:"renderViewer",value:function(){var e=this;if(this.state.loading&&this.state.showSpinner)return a.a.createElement("div",{className:"standalone"},a.a.createElement(ge.a,null));if(qe.isEmpty(this.state.cert))return null;return a.a.createElement("div",{className:"standalone"},a.a.createElement(this.viewer,{data:this.state.cert,dataId:"cert-viewer",active:!0,type:"text",close:function(){return e.closeViewer()},handleError:function(t){return e.handleError(t)}}))}},{key:"renderError",value:function(){var e=this;if(!qe.isEmpty(this.state.error)&&!qe.isEmpty(this.state.error.message))return a.a.createElement("div",{className:"error-message"},a.a.createElement("button",{type:"button",title:"close",className:"icon-button","aria-label":"Close",onClick:function(){return e.handleError()}},a.a.createElement(_e.a,null)),this.state.error.message,a.a.createElement("pre",null,this.state.error.response&&this.state.error.response.data&&JSON.stringify(this.state.error.response.data,null,4)))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{id:"token-view"},a.a.createElement(Et,{formData:this.formData,submit:function(t){return e.requestCert(t)}}),this.renderViewer(),this.renderError())}}]),t}(a.a.Component),kt={dataViewer:We,userViewer:$e,dataEditor:He,userEditor:nt,webConsole:ft,tokenView:gt,keyView:wt},Ot=function(e){function t(){return Object(E.a)(this,t),Object(k.a)(this,Object(O.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return a.a.createElement(he,null,a.a.createElement(j.a,null,a.a.createElement(C.a,{exact:!0,path:"/",component:S}),a.a.createElement(C.a,{exact:!0,path:"/about",component:x}),a.a.createElement(C.a,{exact:!0,path:"/form/:formId",component:xe}),Object.keys(Ne).map(function(e){var t=Ne[e],r=Ce[e],n=t.viewer?kt[t.viewer]:null,i=t.editor?kt[t.editor]:null,s=kt[t.component];return"undefined"===typeof s||null===s?null:a.a.createElement(C.a,{key:e,exact:!0,path:"/oauth2-console/"+e,render:function(){return a.a.createElement(s,{view:e,viewer:n,editor:i,module:t,formData:r})}})})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var It=Object(l.createMuiTheme)({typography:{useNextVariants:!0}}),jt=Object(u.d)(v,Object(u.a)(y.a,g.a));s.a.render(a.a.createElement(o.a,null,a.a.createElement(c.a,{store:jt},a.a.createElement(l.MuiThemeProvider,{theme:It},a.a.createElement(Ot,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[322,1,2]]]);
//# sourceMappingURL=main.4ef243c7.chunk.js.map
