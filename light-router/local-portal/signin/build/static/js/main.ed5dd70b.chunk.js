(this["webpackJsonplogin-view"]=this["webpackJsonplogin-view"]||[]).push([[0],{73:function(e,a,t){e.exports=t(87)},78:function(e,a,t){},87:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(9),l=t.n(o),c=t(36),i=(t(78),t(24)),s=t(66),m=t(11),u=t(133),d=t(128),p=t(126),g=t(131),b=t(129),f=t(132),v=t(29),h=t.n(v),E=t(38),w=t(127),O=t(121),j=t(123),y=t(124),S=t(118),_=t(125),C=Object(S.a)((function(e){return{error:{color:"#ff0000"}}}));var k=function(e){var a,t=C();return r.a.createElement("div",{className:t.error,dangerouslySetInnerHTML:(a=e.error,{__html:a})})},x=Object(S.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var T=function(){var e=x(),a=window.location.search,t=new URLSearchParams(a);console.log("client_id = ",t.get("client_id"));var o=Object(n.useState)(""),l=Object(m.a)(o,2),i=l[0],v=l[1],S=Object(n.useState)(""),C=Object(m.a)(S,2),T=C[0],N=C[1],P=Object(n.useState)(!1),W=Object(m.a)(P,2),D=W[0],U=W[1],R=Object(n.useState)(null==t.get("state")?"":t.get("state")),A=Object(m.a)(R,1)[0],I=Object(n.useState)(null==t.get("client_id")?"":t.get("client_id")),L=Object(m.a)(I,1)[0],q=Object(n.useState)(null==t.get("user_type")?"":t.get("user_type")),V=Object(m.a)(q,1)[0],F=Object(n.useState)(null==t.get("redirect_uri")?"":t.get("redirect_uri")),H=Object(m.a)(F,1)[0],K=Object(n.useState)(""),J=Object(m.a)(K,2),B=J[0],M=J[1],Y=Object(n.useState)(null),$=Object(m.a)(Y,2),z=$[0],G=$[1],Q=Object(n.useState)(null),X=Object(m.a)(Q,2),Z=X[0],ee=X[1],ae=Object(n.useState)([]),te=Object(m.a)(ae,2),ne=te[0],re=te[1],oe=function(e){e.preventDefault(),console.log("handleAccept is called"),window.location.href=z};function le(){return r.a.createElement(O.a,{component:"nav","aria-label":"secondary mailbox folders"},ne.map((function(e,a){return r.a.createElement(j.a,{button:!0},r.a.createElement(y.a,{key:a,primary:e}))})))}return null!==z?(console.log("display consent"),console.log(ne),r.a.createElement(_.a,{component:"main",maxWidth:"xs"},r.a.createElement(p.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:oe},r.a.createElement(E.a,{component:"h1",variant:"h5"},"Consent"),"This application would like to access:",r.a.createElement(w.a,null),r.a.createElement(O.a,{component:"nav","aria-label":"secondary mailbox folders"},r.a.createElement(le,null)),r.a.createElement(w.a,null),r.a.createElement(d.a,{type:"submit",variant:"contained",onClick:function(e){e.preventDefault(),console.log("redirectUrl = ",z);var a=z.split("/"),t=a[0]+"//"+a[2]+"/logout";console.log("fetch url = ",t),fetch(t,{credentials:"include"}).then((function(e){if(!e.ok)throw Error(e.statusText);window.location.href=Z})).catch((function(e){console.log("error=",e),M(e.toString())}))},className:e.submit},"Deny"),r.a.createElement(d.a,{type:"submit",variant:"contained",color:"primary",onClick:oe,className:e.submit},"Accept"))))):r.a.createElement(_.a,{component:"main",maxWidth:"xs"},r.a.createElement(p.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(u.a,{className:e.avatar},r.a.createElement(h.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement(k,{error:B}),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){console.log("username = "+i+" password = "+T+" remember = "+D),console.log("state = "+A+" clientId = "+L+" userType = "+V+" redirectUri = "+H),e.preventDefault();var a={j_username:i,j_password:T,remember:D?"Y":"N",client_id:L};Object.assign(a,A&&{state:A},V&&{user_type:V},H&&{redirect_uri:H}),console.log("data = "+a);var t=Object.keys(a).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(a[e])})).join("&");console.log(t);var n=Object(s.a)({"Content-Type":"application/x-www-form-urlencoded"},Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SAAS_URL&&{service_url:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_SAAS_URL});console.log(n),fetch("/oauth2/code",{method:"POST",redirect:"follow",credentials:"include",headers:n,body:t}).then((function(e){if(e.ok)return e.json();throw Error(e.statusText)})).then((function(e){console.log(e),G(e.redirectUri),ee(e.denyUri),re(e.scopes)})).catch((function(e){console.log("error=",e);var a={host:"lightapi.net",service:"user",action:"loginUser",version:"0.1.0",data:{email:i,password:T}},t="/portal/query?cmd="+encodeURIComponent(JSON.stringify(a));M('Login Failed! Click <a href="link">here</a> to identify root cause.'.replace("link",t))}))}},r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"j_username",label:"User Id",name:"j_username",value:i,autoComplete:"username",autoFocus:!0,onChange:function(e){v(e.target.value)}}),r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"j_password",value:T,label:"Password",type:"password",id:"j_password",autoComplete:"password",onChange:function(e){N(e.target.value)}}),r.a.createElement(g.a,{name:"state",value:A,type:"hidden",id:"state"}),r.a.createElement(g.a,{name:"client_id",value:L,type:"hidden",id:"client_id"}),r.a.createElement(g.a,{name:"user_type",value:V,type:"hidden",id:"user_type"}),r.a.createElement(g.a,{name:"redirect_uri",value:H,type:"hidden",id:"redirect_uri"}),r.a.createElement(b.a,{control:r.a.createElement(f.a,{value:"remember",color:"primary"}),label:"Remember me",onChange:function(e){U(e.target.value)}}),r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Sign In")),r.a.createElement("div",null,"Forget your password? ",r.a.createElement(c.b,{to:"/forget"},"Reset Here"))))},N=t(34),P=t.n(N),W=t(49),D=Object(S.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var U=function(e){var a=new URLSearchParams(e.location.search);console.log("token = ",a.get("token")),console.log("email = ",a.get("email"));var t=D(),o=Object(n.useState)(""),l=Object(m.a)(o,2),c=l[0],i=l[1],s=Object(n.useState)(""),b=Object(m.a)(s,2),f=b[0],v=b[1],w=Object(n.useState)(""),O=Object(m.a)(w,2),j=O[0],y=O[1],S=Object(n.useState)(null==a.get("email")?"":a.get("email")),C=Object(m.a)(S,1)[0],x=Object(n.useState)(null==a.get("token")?"":a.get("token")),T=Object(m.a)(x,1)[0],N=function(){var e=Object(W.a)(P.a.mark((function e(a,t,n){var r,o,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(a,{method:"POST",body:JSON.stringify(n),headers:t});case 3:if((r=e.sent).ok){e.next=6;break}throw r;case 6:return e.next=8,r.json();case 8:o=e.sent,console.log(o),y("The password has been reset."),e.next=20;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,e.t0.json();case 17:l=e.sent,console.log(l),y(l.description);case 20:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(a,t,n){return e.apply(this,arguments)}}();return r.a.createElement(_.a,{component:"main",maxWidth:"xs"},r.a.createElement(p.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(u.a,{className:t.avatar},r.a.createElement(h.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Reset Password"),r.a.createElement(k,{error:j}),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(e){console.log("email = "+C+" token = "+T),e.preventDefault();var a={email:C,token:T,newPassword:c,passwordConfirm:f};console.log("data = ",a);N("/portal/command",{"Content-Type":"application/json"},{host:"lightapi.net",service:"user",action:"resetPassword",version:"0.1.0",data:a})}},r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,disabled:!0,fullWidth:!0,id:"email",label:"Email",name:"email",value:C,autoComplete:"email",autoFocus:!0}),r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"newPassword",value:c,label:"New Password",type:"password",id:"newPassword",autoComplete:"newPassword",onChange:function(e){i(e.target.value)}}),r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"passwordConfirm",value:f,label:"Password Confirm",type:"password",id:"passwordConfirm",autoComplete:"passwordConfirm",onChange:function(e){v(e.target.value)}}),r.a.createElement(g.a,{name:"token",value:T,type:"hidden",id:"token"}),r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"Submit"))))},R=Object(S.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var A=function(){var e=R(),a=Object(n.useState)(""),t=Object(m.a)(a,2),o=t[0],l=t[1],c=Object(n.useState)(""),i=Object(m.a)(c,2),s=i[0],b=i[1],f=function(){var e=Object(W.a)(P.a.mark((function e(a,t,n){var r,o,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(a,{method:"POST",body:JSON.stringify(n),headers:t});case 3:if((r=e.sent).ok){e.next=6;break}throw r;case 6:return e.next=8,r.json();case 8:o=e.sent,console.log(o),b("An Email has been sent."),e.next=20;break;case 13:return e.prev=13,e.t0=e.catch(0),e.next=17,e.t0.json();case 17:l=e.sent,console.log(l),b(l.description);case 20:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(a,t,n){return e.apply(this,arguments)}}();return r.a.createElement(_.a,{component:"main",maxWidth:"xs"},r.a.createElement(p.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(u.a,{className:e.avatar},r.a.createElement(h.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Forget Password"),r.a.createElement(k,{error:s}),r.a.createElement("form",{className:e.form,noValidate:!0,onSubmit:function(e){console.log("email = ",o),e.preventDefault();var a={email:o};console.log("data = ",a);f("/portal/command",{"Content-Type":"application/json"},{host:"lightapi.net",service:"user",action:"forgetPassword",version:"0.1.0",data:a})}},r.a.createElement(g.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email",name:"email",value:o,autoComplete:"email",autoFocus:!0,onChange:function(e){l(e.target.value)}}),r.a.createElement(d.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit},"Submit"))))};var I=function(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:T}),r.a.createElement(i.a,{exact:!0,path:"/reset",component:U}),r.a.createElement(i.a,{exact:!0,path:"/forget",component:A}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=t(65),q=t(130),V=Object(L.a)({typography:{useNextVariants:!0}});l.a.render(r.a.createElement(c.a,null,r.a.createElement(q.a,{theme:V},r.a.createElement(I,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[73,1,2]]]);
//# sourceMappingURL=main.ed5dd70b.chunk.js.map